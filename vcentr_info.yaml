---
- hosts: localhost
  tasks:
    - name: Get My vCenter
      vmware.vmware_rest.vcenter_datacenter_info:
        vcenter_username: dministrator@vsphere.local
        vcenter_password: Default!23
        vcenter_hostname: vc.mk.io
        vcenter_validate_certs: no
      register: r

    - set_fact:
        datacenter_id: "{{ (r.value | selectattr('name', 'equalto', 'Asia-Datacenter1') | map(attribute='datacenter'))[0] }}"

    - debug:
        msg: "{{ datacenter_id }}"
